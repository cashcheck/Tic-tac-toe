<html>
<head>
    <title>Tic Tac Toe</title>
    <meta charset="UTF-8"/>
    <link rel='stylesheet' href='style.css'>
</head>
<body>
<h1 style='text-align:center'>Tic Tac Toe</h1>

<div id='buttons-container'>
<button id='reset'>Restart</button>
</div>

<div id='game-container'>

<div class='game-square' id='0'>
</div>
<div class='game-square' id='1'>
</div>
<div class='game-square' id='2'>
</div>
<div class='game-square' id='3'>
</div>
<div class='game-square' id='4'>
</div>
<div class='game-square' id='5'>
</div>
<div class='game-square' id='6'>
</div>
<div class='game-square' id='7'>
</div>
<div class='game-square' id='8'>
</div>


</div>


</body>
<script>

//gameBoard object

const gameBoard = (function() {
    let board = [0, 0 ,0, 0, 0, 0, 0, 0, 0];
    let turn = 0;

    //function resets the board

    const resetBoard = () => 
    board = [0, 0 ,0, 0, 0, 0, 0, 0, 0]
    
    //function checks if the game has been won, if it has been won it returns the value of the winner if not returns 0

    const winner = function() {

        //checks horizontal wins

        if (board[0] == board[1] && board[0] == board[2] && board[0] != 0) {
            return board[0];
        }
        else if (board[3] == board[4] && board[3] == board[5] && board[3] != 0) {
            return board[3];
        }
        else if (board[6] == board[7] && board[6] == board[8] && board[6] != 0) {
            return board[6];
        }

        //checks vertical wins

        else if (board[0] == board[3] && board[0] == board[6] && board[0] != 0) {
            return board[0];
        }

        else if (board[1] == board[4] && board[1] == board[7] && board[1] != 0) {
            return board[1];
        }

        else if (board[2] == board[5] && board[2] == board[8] && board[2] != 0) {
            return board[2];
        }

        //checks diagonal wins

        else if (board[0] == board[4] && board[0] == board[8] && board[0] != 0) {
            return board[0];
        }

        else if (board[2] == board[4] && board[2] == board[6] && board[2] != 0) {
            return board[2];
        }

        else if (board.find(element => element == 0) == undefined) {
            return 1;
        }

        //no win conditions returns 0

        else {
            return 0;
        }
    }

    //function maps the board to the DOM
    const updateBoard = function() {

        const square0 = querySelector('#0');
        const square1 = querySelector('#1');
        const square2 = querySelector('#2');
        const square3 = querySelector('#3');
        const square4 = querySelector('#4');
        const square5 = querySelector('#5');
        const square6 = querySelector('#6');
        const square7 = querySelector('#7');
        const square8 = querySelector('#8');

    if (board[0] == 'p1') {
        square0.textContent = 'x';
    }
    else if (board[0] == 'p2') {
        square0.textContent = 'o'
    }

    if (board[1] == 'p1') {
        square1.textContent = 'x';
    }
    else if (board[1] == 'p2') {
        square1.textContent = 'o'
    }

    if (board[2] == 'p1') {
        square2.textContent = 'x';
    }
    else if (board[2] == 'p2') {
        square2.textContent = 'o'
    }

    if (board[3] == 'p1') {
        square3.textContent = 'x';
    }
    else if (board[3] == 'p2') {
        square3.textContent = 'o'
    }

    if (board[4] == 'p1') {
        square4.textContent = 'x';
    }
    else if (board[4] == 'p2') {
        square4.textContent = 'o'
    }

    if (board[5] == 'p1') {
        square5.textContent = 'x';
    }
    else if (board[5] == 'p2') {
        square5.textContent = 'o'
    }

    if (board[6] == 'p1') {
        square6.textContent = 'x';
    }
    else if (board[6] == 'p2') {
        square6.textContent = 'o'
    }

    if (board[7] == 'p1') {
        square7.textContent = 'x';
    }
    else if (board[7] == 'p2') {
        square7.textContent = 'o'
    }

    if (board[8] == 'p1') {
        square8.textContent = 'x';
    }
    else if (board[8] == 'p2') {
        square8.textContent = 'o'
    }

    }

    //function plays
    const play = function(player, input) {
        board[input] = player;
        console.log(board);
    }

    return {board, turn, resetBoard, winner, play, updateBoard};  

})();

//reset button

const resetButton = document.querySelector('#reset');
resetButton.addEventListener('click', function() {

gameBoard.resetBoard();
squares.forEach(square => square.textContent = '')
gameBoard.turn = 0;

})

//player factory function

const player = function(name) {

return {name};

}

//player 1 object

const player1 = player('p1');

//player 2 object 

const player2 = player('p2');

//game object

const game = function() {

//add event listeners to squares

const squares = document.querySelectorAll('.game-square')

squares.forEach(square => 
square.addEventListener('click', function() {

//makes sure square isn't filled

//p1 turn

if (gameBoard.turn == 0) { 
gameBoard.play('p1', parseInt(square.id)); 
gameBoard.updateBoard();
gameBoard.turn = 1;
console.log(gameBoard.board)

}

//p2 turn

else {
gameBoard.play('p2', parseInt(square.id))
gameBoard.updateBoard();
gameBoard.turn = 0;
console.log(gameBoard.board)

}

//checks if theres been a winner

console.log(gameBoard.winner());

if (gameBoard.winner() == 1) {
    alert(`It's a tie!`);
}

else if (gameBoard.winner() != 0 && gameBoard.winner() != 1) {
        alert(`${gameBoard.winner()} is the winner!`);
    }

})
)

}

</script>


</html>